!function(){function e(t,n,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(t,n,r||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var u=o(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}!function(){"use strict";function n(e,t,n,r,a,o,u){try{var i=e[o](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var u=e.apply(t,r);function i(e){n(u,a,o,i,s,"next",e)}function s(e){n(u,a,o,i,s,"throw",e)}i(void 0)})}}var i=function(){function e(){u(this,e),this._gameWon=!1,this._gameLost=!1}return s(e,[{key:"print",value:function(e,t){this.engine.print(e,t)}},{key:"printTextFile",value:function(e,t){var n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Printing: "+e),r.next=3,n.engine.printFile(e,t);case 3:case"end":return r.stop()}},r)}))()}},{key:"sleep",value:function(e){this.engine.sleep(e)}},{key:"getInput",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.getInput();case 2:return n=t.sent,t.abrupt("return",(e.print("\n> ".concat(n,"\n")),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"DisplayRoomName",value:function(){for(var e=this.room.getName(this),t=" |",n="=-",r=0;r<e.length;r++)n+=r%2==0?"=":"-";e.length%2==1?n+="-=":(n+="=-=",t="  |");var a="| "+e+t;this.print("\n"+n+"\n"),this.print(a+"\n"),this.print(n+"\n\n")}},{key:"setEngine",value:function(e){this.engine=e}},{key:"gameOver",value:function(){this._gameLost=!0}},{key:"gameWon",value:function(){this._gameWon=!0}},{key:"onFinish",value:function(){this.run()}},{key:"run",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._gameWon=!1,e._gameLost=!1,t.next=4,e.onStart();case 4:e.room=t.sent;case 5:if(e._gameWon||e._gameLost){t.next=15;break}return e.DisplayRoomName(),t.next=9,e.sleep(.5);case 9:return e.print(e.room.getDescription(e)+"\n"),t.next=12,e.room.handleInput(e);case 12:e.room=t.sent;case 13:t.next=5;break;case 15:if(!e._gameWon){t.next=22;break}return e.print("\nCongratulations, you won!\n\n"),e.print("\nPress Enter to Continue...\n"),t.next=20,e.getInput();case 20:t.next=28;break;case 22:if(t.t0=e._gameLost,!t.t0){t.next=28;break}return e.print("\nGame Over!\n\n"),e.print("\nPress Enter to Continue...\n"),t.next=28,e.getInput();case 28:e.onFinish();case 29:case"end":return t.stop()}},t)}))()}}]),e}(),c=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Bathroom"}},{key:"getDescription",value:function(e){return"You enter the Bathroom and look up to see [toilet paper].\n\nThere is a door leads you [back] to the living room.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("toilet paper"!==(a=n.sent.toLowerCase().trim())||!r.hasLeggos){n.next=8;break}r.print("You take out your Leggos that you got from the Kid's Bedroom.\n"),!1===r.hasToiletPaper?(r.print("Now that you're taller, you reach out for the toilet paper.\n"),r.hasToiletPaper=!0,r.print("This might be helpful for later!\n")):r.print("You already have toilet paper!\n"),n.next=15;break;case 8:if("toilet paper"===a&&!r.hasLeggos){n.next=14;break}if("back"!==a){n.next=11;break}return n.abrupt("return",(r.print("You return to the Living Room"),new v));case 11:r.print("Invalid command!"),n.next=15;break;case 14:r.print("You can't reach the toilet paper with your little mouse legs!\nFind something that will make you taller.\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),h=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Attic"}},{key:"getDescription",value:function(e){return"You enter the dark and damp Attic and come across a roll of [tape].\n\nThere is a door that leads you [back] to the Parent's Bedroom.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("tape"===(a=n.sent.toLowerCase().trim())&&!r.hasStickyPaws){n.next=14;break}if("tape"!==a||!r.hasStickyPaws){n.next=9;break}r.print("Your paws are already sticky!\n"),n.next=12;break;case 9:if("back"!==a){n.next=11;break}return n.abrupt("return",(r.print("You return to the Parent's Bedroom"),new p));case 11:r.print("Invalid command!");case 12:n.next=15;break;case 14:r.print("You walk over the tape.\n"),r.hasStickyPaws=!0,r.print("Your paws are now sticky. You can climb up walls now!\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),p=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Parent's Bedroom"}},{key:"getDescription",value:function(e){return"You enter the Parent's Bedroom and find a drawer. You try to [open] it.\n\nThere is a door that leads you [back] to the living room.\nThere is another door to the [right].\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("open"===(a=n.sent.toLowerCase().trim())&&r.sharpness>=6)){n.next=8;break}r.print("You chew through the drawer and open it with ease.\n"),r.hasCatTreat?r.print("You already found everything in this drawer!\n"):(r.print("In the drawer, you find a cat treat.\n"),r.print("You take it and keep it in your mouse cheeks.\n"),r.hasCatTreat=!0),n.next=17;break;case 8:if(!("open"===a&&r.sharpness<6)){n.next=12;break}r.print("You're teeth aren't sharp enough to chew through the drawer!\n"),n.next=17;break;case 12:if("back"!==a){n.next=14;break}return n.abrupt("return",(r.print("You return to the Living Room. \n"),new v));case 14:if("right"!==a){n.next=16;break}return n.abrupt("return",(r.print("You enter the door to the right.\n"),new h));case 16:r.print("Invalid command!");case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}},n)}))()}}]),e}(),l=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Cat's Corner"}},{key:"getDescription",value:function(e){return"You enter the Cat's Corner. Facing a ferocious cat you need something to distract\nit to get a key for the pantry.\nSomething like a [cat treat] would be perfect!\n\nThere is a door that leads you [back] to the Kitchen.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("cat treat"!==(a=n.sent.toLowerCase().trim())||!r.hasKey){n.next=8;break}r.print("You already have the key! Try finding out what the key unlocks.\n"),n.next=19;break;case 8:if("cat treat"!==a||!r.hasCatTreat){n.next=12;break}r.print("You throw the treat. The cat runs towards it leaving the key unguarded.\n"),r.print("You get the key for the pantry without being eaten. Phew!\n"),r.hasKey=!0,n.next=19;break;case 12:if("cat treat"===a&&!r.hasCatTreat){n.next=18;break}if("back"!==a){n.next=15;break}return n.abrupt("return",(r.print("You return to where the puddle once was.\n"),new d));case 15:r.print("Invalid command!"),n.next=19;break;case 18:r.print("You need to find a cat treat to distract the cat. Unless you want to be eaten!\n");case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}},n)}))()}}]),e}(),f=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Pantry"}},{key:"getDescription",value:function(e){return"You need a [key] to open the pantry.\n\nThere is a door that leads you [back] to where the puddle once was.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("key"!==(a=n.sent.toLowerCase().trim())||!r.hasKey){n.next=8;break}r.print("You use the key to open the pantry and come before piles of oozy, fragrant cheese!\n"),r.gameWon(),n.next=11;break;case 8:if("back"!==a){n.next=10;break}return n.abrupt("return",(r.print("You return to where the puddle once was.\n"),new d));case 10:r.print("Invalid command!");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),d=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Cross The Puddle"}},{key:"getDescription",value:function(e){return"There is another door that leads [down] and another to the [right].\n\nThere is a door that leads you [back] to the entrance of the Kitchen.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","down"===a?(r.print("You enter the door.\n"),new l):"right"===a?(r.print("You enter the door to the right.\n"),new f):"back"===a?(r.print("You return to the Kitchen entrance.\n"),new g):(r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),g=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Kitchen"}},{key:"getDescription",value:function(e){return"You enter the Kitchen. There is a puddle in your way blocking the other pathways.\nSomething like [toilet paper] might be able to help you cross the puddle.\n\nThere is a door that leads you [back] to the Kid's Bedroom.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","toilet paper"===a&&r.hasToiletPaper?(r.print("You use the toilet paper to cross the puddle.\n"),new d):"back"===a?(r.print("You return to the Kid's Bedroom.\n"),new m):(r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),m=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Kid's Bedroom"}},{key:"getDescription",value:function(e){return"You enter the Kid's Bedroom and see some something on a shelf. You try to [climb] up the wall.\n\nThere a door that leads you [back] to the living room.\nThere is another door to the [right].\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("climb"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.hasStickyPaws?(r.print("You climb up the wall and reach some Leggo blocks.\n"),r.hasLeggos=!0,r.print("These Leggos can make you taller now!\n")):r.print("You're paws are too slippery to climb up the wall.\n"),n.next=13;break;case 8:if("back"!==a){n.next=10;break}return n.abrupt("return",(r.print("You return to the Living Room.\n"),new v));case 10:if("right"!==a){n.next=12;break}return n.abrupt("return",(r.print("You enter the door to the right.\n"),new g));case 12:r.print("Invalid command!");case 13:return n.abrupt("return",t);case 14:case"end":return n.stop()}},n)}))()}}]),e}(),y=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Backyard"}},{key:"getDescription",value:function(e){return"You enter the Backyard and see a dog toy on the ground.\nYou can [chew] on the toys or you can approach the [dog kennel].\n\nThere is a door leads you [back] to the living room.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("chew"===(a=n.sent.toLowerCase().trim())&&r.sharpness<10)){n.next=8;break}r.print("You chew on the dog toy.\n"),r.sharpness=r.sharpness+6,r.print("The sharpness of your teeth is now ".concat(r.sharpness,"\n")),n.next=19;break;case 8:if(!("chew"===a&&r.sharpness>=10)){n.next=12;break}r.print("Your teeth are pretty sharp already!\n"),n.next=19;break;case 12:if("dog kennel"!==a){n.next=16;break}r.print("You come closer to the dog. Hearing it start to growl, you try to run away, but it's too late!\n"),r.print("The dog launches at you and grabs your tail.\n"),r.gameOver(),n.next=19;break;case 16:if("back"!==a){n.next=18;break}return n.abrupt("return",(r.print("You return to the Living Room"),new v));case 18:r.print("Invalid command!");case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}},n)}))()}}]),e}(),v=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Living Room"}},{key:"getDescription",value:function(e){return"You run into the house coming across 5 different pathways from the living room. \nThe paths lead to the [left], [right first room], [right second room], or [down]. \nThe entrance is also [back] behind you.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","back"===a?(r.print("You return to the House Entrance.\n"),new k):"left"===a?(r.print("You take the path to the left.\n"),new c):"right first room"===a?(r.print("You take the path to the right.\n"),new p):"right second room"===a?(r.print("You take the path to the right.\n"),new m):"down"===a?(r.print("You take the path down.\n"),new y):(r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),k=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"House Entrance"}},{key:"getDescription",value:function(e){return"You stand at the entrance of the dark and gloomy house.\nOthers have told you that at the other end of the house, mounds of cheese and other\ngoods are piled in the pantry. Do you [enter] and risk\ngetting eaten by a cat? Or do you [run] back to your cold and foodless home.\n"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","enter"===a?(r.print("You enter the house.\n"),new v):("run"===a?(r.print("On second thought, you don't want the gourmet cheese as much as you thought you did.\n"),r.gameOver()):r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),w=function(n){t(c,n);var i=r(c);function c(){var e;return u(this,c),(e=i.apply(this,arguments)).sharpness=0,e.hasCatTreat=!1,e.hasStickyPaws=!1,e.hasLeggos=!1,e.hasToiletPaper=!1,e.hasKey=!1,e}return s(c,[{key:"getName",value:function(){return"Cat's Corner"}},{key:"getAuthor",value:function(){return"Susan Cho"}},{key:"getDescription",value:function(){return"As a mouse, find your way around a house to find a pantry filled with cheese!"}},{key:"gameWon",value:function(){var t=this,n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e(o(c.prototype),"gameWon",t).call(n),r.next=3,n.printTextFile("CatsCorner/winnermice.txt");case 3:case"end":return r.stop()}},r)}))()}},{key:"gameOver",value:function(){var t=this,n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e(o(c.prototype),"gameOver",t).call(n),r.next=3,n.printTextFile("CatsCorner/gameover.txt");case 3:case"end":return r.stop()}},r)}))()}},{key:"onStart",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.sharpness=0,e.hasCatTreat=!1,e.hasStickyPaws=!1,e.hasLeggos=!1,e.hasToiletPaper=!1,e.hasKey=!1,t.next=8,e.printTextFile("CatsCorner/mice.txt");case 8:return t.next=10,e.printTextFile("CatsCorner/title.txt");case 10:return e.print("\n                                  A text adventure by Susan Cho\n"),e.sleep(.5),e.print("\nAfter not having food for two days, you are a mouse trying to find a source\nof food for your family.\n\n"),e.sleep(.5),e.print("You follow a scent that leads you to a house that smells delightful.\n\n"),e.sleep(.5),e.print("Peering through the windows, you see many dangers in the way of a stuffed pantry.\n\n"),e.sleep(.5),e.print("You walk up to the door.\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),t.next=23,e.getInput();case 23:return t.abrupt("return",new k);case 24:case"end":return t.stop()}},t)}))()}}]),c}(i),b=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"A Dead End"}},{key:"getDescription",value:function(e){return"You are at a dead end. There is a large [boulder] here. A path leads [back] to\nthe mouth of the cave."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("boulder"===(a=n.sent.toLowerCase().trim())&&r.strength<10)){n.next=8;break}r.print("You try to lift the boulder but you're too weak!\n"),n.next=15;break;case 8:if(!("boulder"===a&&r.strength>=10)){n.next=12;break}r.print("You lift the boulder with ease!\n"),r.hasKey?r.print("Now you're just showing off.\n"):(r.print("Beneath the boulder, you find a key.\n"),r.print("You take the key and place it in your pocket!\n"),r.hasKey=!0),n.next=15;break;case 12:if("back"!==a){n.next=14;break}return n.abrupt("return",(r.print("You return to the Mouth of the Cave\n"),new R));case 14:r.print("Invalid command!\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),x=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Ye Olde Gym"}},{key:"getDescription",value:function(e){return"You are in a gym filled with exercise equipment. A sign on the wall reads, 'Ye\nOlde Gym'. It appears all of the equipment is in use except for some [weights].\nOn the far wall is an [elevator]."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("weights"===(a=n.sent.toLowerCase().trim())&&r.strength<10)){n.next=8;break}r.print("You pick up the weights and do a rep!\n"),r.strength=r.strength+6,r.sleep(1),r.print("Your strength is now ".concat(r.strength,"\n")),n.next=15;break;case 8:if(!("weights"===a&&r.strength>=10)){n.next=12;break}r.print("You're feeling pretty strong already, maybe you could go lift some boulders!\n"),n.next=15;break;case 12:if("elevator"!==a){n.next=14;break}return n.abrupt("return",(r.print("You enter the elevator and begin to ascend."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("The door opens and you step out into the cave.\n"),new T));case 14:r.print("Invalid command!\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),Y=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"The Dragon's Lair"}},{key:"getDescription",value:function(e){return"You are standing inside of a dragon's lair! The air is hot and dank. A tunnel\nleads [back] the way you came. In the center of the room is a massive pile of\ngold atop which a massive red dragon slumbers. Probably best not to [wake] the\ndragon. If you could [slay] it, you would be a hero!"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","back"===a?(r.print("You head back the way you came.\n"),new I):("wake"===a?(r.print("You wake the dragon...\n"),r.sleep(1),r.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),r.gameOver()):"slay"===a&&r.hasSword?(r.print("You draw your sword to slay the dragon.\n"),r.sleep(1),r.print("With your sword in hand, you sneak up to the dragon and drive it into the\nbeast's heart. The evil dragon winces as it realizes its reign of terror is\nover. Congratulations, you are a hero!"),r.gameWon()):"slay"!==a||r.hasSword?r.print("Invalid command!\n"):(r.print("You attempt to pummel the dragon with your fists!\n"),r.sleep(1),r.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),r.gameOver()),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),I=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"A Large Natural Cave"}},{key:"getDescription",value:function(e){return"You are in a large natural room within a cave. It is unnaturally warm here and\nyou can hear what sounds like a giant creature [snoring] around a corner. In the\ncenter of the room is a [chest]. A [tunnel] leads back toward the mouth of the\ncave."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("snoring"!==(a=n.sent.toLowerCase().trim())){n.next=6;break}return n.abrupt("return",(r.print("You slowly approach the snoring...\n"),new Y));case 6:if("chest"!==a||!r.hasKey){n.next=10;break}!1===r.hasSword?(r.print("The chest is locked.\n"),r.sleep(1),r.print("You take the key from your pocket and unlock the chest.\n"),r.sleep(1),r.print("Inside, you find a beautiful sword!\n"),r.hasSword=!0):r.print("You search the chest again, but it is empty.\n"),n.next=17;break;case 10:if("chest"===a&&!r.hasKey){n.next=16;break}if("tunnel"!==a){n.next=13;break}return n.abrupt("return",(r.print("You head back toward the mouth of the cave.\n"),new T));case 13:r.print("Invalid command!\n"),n.next=17;break;case 16:r.print("The chest is locked!\n");case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}},n)}))()}}]),e}(),T=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"A Long Winding Tunnel"}},{key:"getDescription",value:function(e){return"You are in a long winding tunnel. It is pitch black except for the beam emitting\nfrom your flashlight. You notice a [button] on the wall here. In one direction,\nthe tunnel leads to the [mouth] of the cave. In the other, the [tunnel]\ncontinues."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","button"===a?(r.print("You press the button and wait."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("DING! The wall next to the button opens revealing an elevator!\n"),r.print("Entering the elevator, you begin to descend."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("The elevator door opens and you exit.\n"),new x):"tunnel"===a?(r.print("You continue down the tunnel.\n"),new I):"mouth"===a?(r.print("You return to the mouth of the cave.\n"),new R):(e.print("Invalid command!\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),R=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"The Mouth of the Cave"}},{key:"getDescription",value:function(e){return"You are at the mouth of the cave. It is dark and damp. Luckily, you brought your\ntrusty flashlight with you! You can see two paths here. One leads to the [left]\nand the other leads to the [right]. You can also see the [entrance] of the cave."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","right"===a?(r.print("You take the path to the right.\n"),new T):"left"===a?(r.print("You take the path to the left.\n"),new b):"entrance"===a?(r.print("On second thought, you return to the entrance.\n"),new C):(r.print("Invalid Command!\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),C=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Cave Entrance"}},{key:"getDescription",value:function(e){return"You stand before a cave. It is well known that an evil dragon slumbers here.\nFrom time to time, the dragon wakes to terrorize the nearby villages and steal\ntheir gold. Dare you [enter] the cave in search of riches? Or would you rather\n[run] home to the comfort of your warm bed?"}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","enter"===a?(r.print("You enter the cave.\n"),new R):("run"===a?(r.print("Scared of the dragon, you run home to your bed where fall asleep.\n"),r.gameOver()):r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),L=function(e){t(o,e);var n=r(o);function o(){var e;return u(this,o),(e=n.apply(this,arguments)).hasKey=!1,e.hasSword=!1,e.strength=0,e}return s(o,[{key:"getName",value:function(){return"The Dragon's Lair"}},{key:"getAuthor",value:function(){return"Joseph Collard"}},{key:"getDescription",value:function(){return"Description"}},{key:"onStart",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.strength=0,e.hasKey=!1,e.hasSword=!1,t.next=5,e.printTextFile("dragonsLair/title.txt");case 5:return e.print("\n                           A text adventure by Joseph Collard\n"),e.sleep(.5),t.abrupt("return",new C);case 8:case"end":return t.stop()}},t)}))()}}]),o}(i),P=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Broken Escalator"}},{key:"getDescription",value:function(e){return"You are standing on a broken escalator. There is a [goat] here blocking your \nway forward. The steps of the escalator lead [back] to the subway platform."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","back"===a?(r.print("\nSeeing no way forward, you return to the subway platform.\n"),new S):("goat"===a?(r.print("\nThere is an angry looking goat blocking the escalator.\n"),r.print("\nThe goat looks very [hungry]. BAAAA!\n"),r.isGoatOnFire&&r.print("\nThe goat is on [fire].\n")):"fire"===a&&r.isGoatOnFire?r.hasSpryte?(r.print("\nyou take the Spryte from your pocket and pour it over the goat. The flames go out.\n"),r.isGoatOnFire=!1):r.print("\nYep! That's a fire!"):"fire"!==a||r.isGoatOnFire?"hungry"===a&&r.isGoatOnFire?r.print("\nThe goat is on fire. Perhaps you should find a way to put it out.\n"):"hungry"!==a||r.isGoatOnFire?r.print("\nInvalid command!"):(r.print("\nThe goat looks quite hungry. You hand it the empty Spryte can.\nThe goat crunches through it in a matter of seconds. It 'BAAAS' happily before hopping away.\nYou continue to the broken escalator and return home.\nDid that really happen?\n"),r.gameWon()):r.print("\nNo fire here!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),S=function(){function e(){u(this,e)}return s(e,[{key:"getName",value:function(e){return"Subway Platform"}},{key:"getDescription",value:function(e){return"You are standing on the subway platform. There is a broken [escalator] here\nand a vending [machine]."}},{key:"handleInput",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("escalator"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nIt's broken. You'll have to [walk] up it.\n"),n.next=11;break;case 8:if("walk"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou start to walk up the escalator.\n"),new P));case 10:"machine"===a?r.print("\nOh wow! It's one of those cool new Spryte machines. It has a [coin] slot.\n"):"coin"!==a||r.hasSpryte?r.print("coin"===a&&r.hasSpryte?"\nYou already have a Spryte\n":"\nInvalid command!"):(r.print("\nYou drop 4 coins into the vending machine. You hear a loud whirring sound \nfollowed by a loud *KA-CHUNK*. You reach down and pick up a Spryte.\n"),r.hasSpryte=!0);case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),D=function(e){t(o,e);var n=r(o);function o(){var e;return u(this,o),(e=n.apply(this,arguments)).isGoatOnFire=!0,e.hasSpryte=!1,e}return s(o,[{key:"getName",value:function(){return"Flaming Goat"}},{key:"getAuthor",value:function(){return"Goat Man Jones"}},{key:"getDescription",value:function(){return"Can you pass the Goat's challenge?"}},{key:"onStart",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isGoatOnFire=!0,e.hasSpryte=!1,t.next=4,e.printTextFile("FlamingGoat/title.txt");case 4:return e.print("\n                           A text adventure by Goat Man Jones\n"),e.sleep(.5),e.print("\nAfter a long day, you are the lone passenger on a subway training heading toward home.\n\n"),e.sleep(.5),e.print("It slows as it approaches your stop.\n\n"),e.sleep(.5),e.print("The doors open and you step out onto an empty platform.\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),t.next=15,e.getInput();case 15:return t.abrupt("return",new S);case 16:case"end":return t.stop()}},t)}))()}}]),o}(i),O=new(function(){function e(){u(this,e),this.SINGLE_ADVENTURE_MODE=!0}return s(e,[{key:"getAdventures",value:function(){var e=[];return e.push(new L),e.push(new D),e}},{key:"getAdventure",value:function(){return new w}}]),e}()),A=function e(t){u(this,e),this.TYPE="PrintMessage",this.message=t},N=function e(){u(this,e),this.TYPE="PickAdventureMessage"},E=new(function(){function e(){u(this,e),this.fileCache=new Map,this.inputQueue=[],this.printQueue=[]}return s(e,[{key:"threadSleep",value:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=t.printQueue.length){n.next=2;break}return n.abrupt("return",new Promise(function(t){return setTimeout(t,1e3*e)}));case 2:return r=t.printQueue[t.printQueue.length-1].renderAfter-(new Date).getTime()+1e3*e,n.abrupt("return",new Promise(function(e){return setTimeout(e,r)}));case 4:case"end":return n.stop()}},n)}))()}},{key:"sleep",value:function(e){var t=this.getStartTime()+1e3*e;this.printQueue.push({message:"",renderAfter:t})}},{key:"getInput",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.inputQueue.length){t.next=5;break}return t.next=3,e.threadSleep(.1);case 3:t.next=0;break;case 5:return n=e.inputQueue.shift(),t.abrupt("return",Promise.resolve(n));case 7:case"end":return t.stop()}},t)}))()}},{key:"getStartTime",value:function(){return 0==this.printQueue.length?(new Date).getTime():this.printQueue[this.printQueue.length-1].renderAfter}},{key:"print",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=1e3*t,r=this.getStartTime(),a=0;a<e.length;a++)r+=n,this.printQueue.push({message:e[a],renderAfter:r})}},{key:"printLines",value:function(e,t){var n=this,r=1e3*t,a=this.getStartTime();e.forEach(function(e){a+=r,n.printQueue.push({message:e+"\n",renderAfter:a})})}},{key:"printFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r){if(n.fileCache.has(e)){var a=n.fileCache.get(e);return n.printLines(a,t),void r()}var o=new XMLHttpRequest,u="assets/"+e;o.addEventListener("load",function(a){var i=[];o.status>=200&&o.status<300?i=o.responseText.split("\n"):(i=['Could not load file: "'.concat(e,'". Error Code: ').concat(o.status," - ").concat(o.statusText)],console.error("Could not load: ".concat(u))),n.fileCache.set(e,i),n.printLines(i,t),r()}),o.open("GET",u),o.send()}));case 1:case"end":return r.stop()}},r)}))()}},{key:"startPrintThread",value:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.printQueue.length){t.next=5;break}return t.next=3,e.threadSleep(.1);case 3:t.next=0;break;case 5:for(n=(new Date).getTime();e.printQueue.length>0&&e.printQueue[0].renderAfter<=n;)r=e.printQueue.shift(),postMessage(new A(r.message));case 7:t.next=0;break;case 9:case"end":return t.stop()}},t)}))()}},{key:"pushInput",value:function(e){this.inputQueue.push(e.message)}}]),e}());addEventListener("message",function(e){var t=e.data;if("RunAdventureMessage"===t.TYPE){var n=O.SINGLE_ADVENTURE_MODE?O.getAdventure():O.getAdventures()[t.index];n.setEngine(E),console.log("Starting PrintThread."),E.startPrintThread(),console.log("Starting adventure."),n.run(),O.SINGLE_ADVENTURE_MODE||(n.onFinish=function(){return postMessage(new N)})}else"InputMessage"==t.TYPE?E.pushInput(t):(console.error("An illegal message was received by the engine: "),console.error(t))})}()}();