!function(){"use strict";function e(e,t,n,r,o,a,i){try{var s=e[a](i),u=s.value}catch(h){return void n(h)}s.done?t(u):Promise.resolve(u).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(o,a){var i=t.apply(n,r);function s(t){e(i,o,a,s,u,"next",t)}function u(t){e(i,o,a,s,u,"throw",t)}s(void 0)})}}class n{constructor(){this._gameWon=!1,this._gameLost=!1}print(e,t){this.engine.print(e,t)}printTextFile(e,n){var r=this;return t(function*(){console.log("Printing: "+e),yield r.engine.printFile(e,n)})()}sleep(e){this.engine.sleep(e)}getInput(){var e=this;return t(function*(){const t=yield e.engine.getInput();return e.print(`\n> ${t}\n`),t})()}DisplayRoomName(){const e=this.room.getName(this);let t=" |",n="=-";for(let o=0;o<e.length;o++)n+=o%2==0?"=":"-";e.length%2==1?n+="-=":(n+="=-=",t="  |");let r="| "+e+t;this.print("\n"+n+"\n"),this.print(r+"\n"),this.print(n+"\n\n")}setEngine(e){this.engine=e}gameOver(){this._gameLost=!0}gameWon(){this._gameWon=!0}onFinish(){this.run()}run(){var e=this;return t(function*(){for(e._gameWon=!1,e._gameLost=!1,e.room=yield e.onStart();!e._gameWon&&!e._gameLost;)e.DisplayRoomName(),yield e.sleep(.5),e.print(e.room.getDescription(e)+"\n"),e.room=yield e.room.handleInput(e);e._gameWon?(e.print("\nCongratulations, you won!\n\n"),e.print("\nPress Enter to Continue...\n"),yield e.getInput()):e._gameLost&&(e.print("\nGame Over!\n\n"),e.print("\nPress Enter to Continue...\n"),yield e.getInput()),e.onFinish()})()}}class r{getName(e){return"Coyote"}getDescription(e){return"You enter camp when all of a sudded the [coyote] that stole your [keys]\n runs up to you. It still has your keys in it's mouth, but it\n looks like it's hungry for your [steak]."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"coyote"===r&&!1===t.doesPlayerHaveKeys?t.print("\nYou try to scare the coyote into dropping your keys,\nbut it only makes the coyote angry. It may be better idea to find another way\nto get your keys back."):"steak"===r&&!1===t.doesPlayerHaveKeys?(t.print("\nYou throw your steak at the coyote and it immediately\n drops your keys to go after the steak.\nNow it's time to drive out of here! Try starting your car now that\nyou've got your keys back."),t.doesPlayerHaveKeys=!0):"coyote"===r&&!0===t.doesPlayerHaveKeys?t.print("\nYou've already got your keys. Leave the coyote alone and get\nout of here!"):"keys"===r&&!1===t.doesPlayerHaveKeys?t.print("\nYou try to take your keys from the coyote but it starts\n growling at you. Try finding another way to get your keys."):"steak"===r&&!0===t.doesPlayerHaveKeys?t.print("\nYou've already got your keys. Time to get out of here!"):"keys"===r&&!0===t.doesPlayerHaveKeys?(t.print("\nYou jump into your car and use your keys to star the engine.\n Now that you have a way to leave you waste no time driving\n out of here and heading home!. "),t.gameWon()):t.print("\nInvalid Command.\n"),n})()}}class o{getName(e){return"Chest"}getDescription(e){return"While walking back to camp you trip on something hard\n buried in the sand. You shovel off the sand and find a hidden [chest]\n Maybe you should figure out how to [bust] it open!"}handleInput(e){var n=this;return t(function*(){const t=e,o=(yield t.getInput()).toLowerCase().trim();if("chest"===o)t.print("\nYou try opening the chest but naturally, it's locked.\n Try using force to get it open");else{if("bust"===o)return t.print("\nYou take the boulder you are carrying and use all\n your strength to throw it at the chest."),t.print("\nThe chest opens up and you see the inside is filled with cooked steak!\nFinally some real food!\nNow that you've gotten ahold of some food, you head back to camp."),new r;t.print("\nInvalid Command.\n")}return n})()}}class a{getName(e){return"Boulder"}getDescription(e){return"While walking back towards camp with your [smoothie] in your hand,\n you come across a large [boulder].\n "}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("smoothie"===r&&!1===t.hasPlayerDrunkTheSmoothie)t.print("\nYou drink your smoothie and now feel strong enough\n to lift the boulder in your path."),t.hasPlayerDrunkTheSmoothie=!0;else if("smoothie"===r&&!0===t.hasPlayerDrunkTheSmoothie)t.print("\nYou already drank your smoothie.\n Maybe you should try your luck lifting\n the boulder!");else if("boulder"===r&&!1===t.hasPlayerDrunkTheSmoothie)t.print("\nYou try lifting the boulder, but you are not\n strong enough. Maybe try drinking your smoothie first!");else{if("boulder"===r&&!0===t.hasPlayerDrunkTheSmoothie)return t.print("\nAfter drinking your smoothie you are able to easily lift\n the boulder"),t.print("\nYou decide to bring the boulder along with you as you head\n back towards camp, after all it may come in handy later on!"),new o;t.print("\nInvalid Command.\n")}return n})()}}class i{getName(e){return"Blender"}getDescription(e){return"You head down path two while carrying your [coconuts] and come to a room\n with a [blender] and some [protein powder] ."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("coconuts"===r)t.print("\nYou decide to make a smoothie and put the coconuts in the blender.\n"),t.isCoconutInBlender=!0;else if("protein powder"===r&&!1===t.isCoconutInBlender)t.print("\nTry putting the coconuts in the blender first!\n");else if("protein powder"===r&&!0===t.isCoconutInBlender)t.print("\nYou decide to throw some scoops of protein powder\ninto the blender to add a little extra flavor!\n"),t.isProteinPowderInBlender=!0;else if("blender"!==r||!1!==t.isProteinPowderInBlender&&!1!==t.isCoconutInBlender){if("blender"===r&&t.isProteinPowderInBlender&&!0===t.isCoconutInBlender)return t.print("\nYou blend the coconuts and protein powder and make\na delicious smoothie!"),t.print("\nNow that you've made a smoothie you leave the cave\nand head back out into the desert.\n"),new a;t.print("\nInvalid Command.\n")}else t.print("\nYou do not have all your ingredients in the blender yet!");return n})()}}class s{getName(e){return"DeadEnd"}getDescription(e){return"You go down path one but it ends up being a dead end.\nGo back to the cave [entrance]."}handleInput(e){var n=this;return t(function*(){const t=e;return"entrance"===(yield t.getInput()).toLowerCase().trim()?(t.print("\nYou head back to the entrance of the cave"),new u):(t.print("\nInvalid Command.\n"),n)})()}}class u{getName(e){return"Cave"}getDescription(e){return"After eating, you grab some coconuts for the road and head over to a nearby cave.\nYou approach the entrance and see that the cave splits into two\n You must choose to go down either path [One] or path [Two]."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"one"===r?(t.print("\nYou start to head down path one.\n"),new s):"two"===r?(t.print("You start to head down path two.\n"),new i):(t.print("\nInvalid Command.\n"),n)})()}}class h{getName(e){return"PalmTree"}getDescription(e){return"You head over to a palm tree and see it is full of coconuts.\nYou are feeling pretty hungry, so you decide to try getting some of them down.\nThere are some [rocks] that may be able to help you,\nor you could try giving the tree a [shake]"}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("rocks"===r&&!1===t.hasCoconut)t.print("\nYou throw a rock up at the tree but you miss the tree by a mile!");else{if("rocks"===r&&!0===t.hasCoconut)return t.print("You use a rock to break open a coconut and get the fruit!"),new u;"shake"===r?(t.print("\nYou shake the tree and plenty of coconuts fall down!\nNice work! But now you've just got solid coconuts.\nTry getting them to [break]."),t.hasCoconut=!0):t.print("break"===r?"\nYou slam the coconuts on the ground but they don't crack, maybe try using some of the [rocks]!":"\nInvalid Command.\n")}return n})()}}class l{getName(e){return"Oasis"}getDescription(e){return"You head off in search of water and see a nearby oasis.\nYou see a [bucket] laying next to the [water], which is clean in some areas,\nbut murky and [dirty] in others."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("water"===r&&!1===t.hasBucket)t.print("\nYou try drinking some water but most of it slips through your hands.\nMaybe you should try using a [bucket]!\n");else if("bucket"===r&&!1===t.hasBucket)t.print("\nGreat! Now you have a bucket!\nBut there's no [water] in your bucket.\nTry filling it up first!\n"),t.hasBucket=!0;else if("bucket"===r&&!0===t.hasBucket)t.print("\nYou already have a bucket!");else{if("water"===r&&!0===t.hasBucket)return t.print("\nYou put the water into the bucket "),t.print("\nAfter drinking the water you decide to explore, and head over to a nearby palm tree.\n"),new h;t.print("dirty"===r?"\nYou sip a bit of the dirty water but spit it out immediately.\nMaybe try drinking some that's clean!\n":"\nInvalid Command.\n")}return n})()}}class d{getName(e){return"Desert"}getDescription(e){return"You exit your car and see that you are completely stranded in the middle of nowhere.\nAll of a sudden a coyote comes out of nowhere and grabs your keys before\n running off into the desert.\n You decide to set up camp while you are stuck here\nYou take the [tent] and [poles] you have\nin your truck and try to set it up."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("tent"===r)t.print("\nOops! Try using the poles first.\n");else{if("poles"===r)return t.print("\nYou put the poles in the tent and successfully set up your shelter!\n"),t.print("\nAfter all that work you have gotten really thirsty.\nIt's time to go find some water!\n"),new l;t.print("\nInvalid Command.\n")}return n})()}}class p{getName(e){return"StoppingTheCar"}getDescription(e){return"You see a spot to park up ahead but there is a cactus right behind the spot.\nIf you [accelerate] you will miss the spot. Try to [brake] quickly!."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("accelerate"===r)t.print("\nYou crash into the cactus and your car explodes.\n"),t.gameOver();else{if("brake"===r)return t.print("\nYou stop right before the cactus and stop your car in a safe spot.\n"),new d;t.print("\nInvalid Command.\n")}return n})()}}class c{getName(e){return"Car"}getDescription(e){return"You are driving through the desert in your car when the engine begins to overheat.\nThe car goes off the road and you see several oncoming obstacles in your path.\nYou see a fork in the road. The path on the [left] is blocked by a boulder.\nThe path on the [right] is clear."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("left"===r)t.print("\nYou crash into the boulder and your car explodes"),t.gameOver();else{if("right"===r)return t.print("\nYou head onto the clear path and continue driving down the path.\n"),new p;t.print("\nInvalid Command.\n")}return n})()}}class y extends n{constructor(){super(...arguments),this.hasCoconut=!1,this.hasBucket=!1,this.isCoconutInBlender=!1,this.isProteinPowderInBlender=!1,this.hasPlayerDrunkTheSmoothie=!1,this.doesPlayerHaveKeys=!1,this.hasSpryte=!1}getName(){return"Desert Survival"}getAuthor(){return"Coconut Collector"}getDescription(){return"Can you survive the desert?"}onStart(){var e=this;return t(function*(){return e.hasCoconut=!1,e.hasSpryte=!1,e.hasBucket=!1,e.isCoconutInBlender=!1,e.isCoconutInBlender=!1,e.hasPlayerDrunkTheSmoothie=!1,e.doesPlayerHaveKeys=!1,yield e.printTextFile("DesertSurvival/title.txt"),e.print("\n                           A text adventure by Coconut Collector\n"),e.sleep(.5),e.print("\nYou are planning to go on a trip to the desert. You pack your things and get in your car\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),yield e.getInput(),new c})()}}class g{getName(e){return"A Dead End"}getDescription(e){return"You are at a dead end. There is a large [boulder] here. A path leads [back] to\nthe mouth of the cave."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("boulder"===r&&t.strength<10)t.print("You try to lift the boulder but you're too weak!\n");else if("boulder"===r&&t.strength>=10)t.print("You lift the boulder with ease!\n"),t.hasKey?t.print("Now you're just showing off.\n"):(t.print("Beneath the boulder, you find a key.\n"),t.print("You take the key and place it in your pocket!\n"),t.hasKey=!0);else{if("back"===r)return t.print("You return to the Mouth of the Cave\n"),new k;t.print("Invalid command!\n")}return n})()}}class m{getName(e){return"Ye Olde Gym"}getDescription(e){return"You are in a gym filled with exercise equipment. A sign on the wall reads, 'Ye\nOlde Gym'. It appears all of the equipment is in use except for some [weights].\nOn the far wall is an [elevator]."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("weights"===r&&t.strength<10)t.print("You pick up the weights and do a rep!\n"),t.strength=t.strength+6,t.sleep(1),t.print(`Your strength is now ${t.strength}\n`);else if("weights"===r&&t.strength>=10)t.print("You're feeling pretty strong already, maybe you could go lift some boulders!\n");else{if("elevator"===r)return t.print("You enter the elevator and begin to ascend."),t.sleep(1),t.print("."),t.sleep(1),t.print(".\n"),t.sleep(1),t.print("The door opens and you step out into the cave.\n"),new v;t.print("Invalid command!\n")}return n})()}}class f{getName(e){return"The Dragon's Lair"}getDescription(e){return"You are standing inside of a dragon's lair! The air is hot and dank. A tunnel\nleads [back] the way you came. In the center of the room is a massive pile of\ngold atop which a massive red dragon slumbers. Probably best not to [wake] the\ndragon. If you could [slay] it, you would be a hero!"}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"back"===r?(t.print("You head back the way you came.\n"),new w):("wake"===r?(t.print("You wake the dragon...\n"),t.sleep(1),t.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),t.gameOver()):"slay"===r&&t.hasSword?(t.print("You draw your sword to slay the dragon.\n"),t.sleep(1),t.print("With your sword in hand, you sneak up to the dragon and drive it into the\nbeast's heart. The evil dragon winces as it realizes its reign of terror is\nover. Congratulations, you are a hero!"),t.gameWon()):"slay"!==r||t.hasSword?t.print("Invalid command!\n"):(t.print("You attempt to pummel the dragon with your fists!\n"),t.sleep(1),t.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),t.gameOver()),n)})()}}class w{getName(e){return"A Large Natural Cave"}getDescription(e){return"You are in a large natural room within a cave. It is unnaturally warm here and\nyou can hear what sounds like a giant creature [snoring] around a corner. In the\ncenter of the room is a [chest]. A [tunnel] leads back toward the mouth of the\ncave."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("snoring"===r)return t.print("You slowly approach the snoring...\n"),new f;if("chest"===r&&t.hasKey)!1===t.hasSword?(t.print("The chest is locked.\n"),t.sleep(1),t.print("You take the key from your pocket and unlock the chest.\n"),t.sleep(1),t.print("Inside, you find a beautiful sword!\n"),t.hasSword=!0):t.print("You search the chest again, but it is empty.\n");else if("chest"!==r||t.hasKey){if("tunnel"===r)return t.print("You head back toward the mouth of the cave.\n"),new v;t.print("Invalid command!\n")}else t.print("The chest is locked!\n");return n})()}}class v{getName(e){return"A Long Winding Tunnel"}getDescription(e){return"You are in a long winding tunnel. It is pitch black except for the beam emitting\nfrom your flashlight. You notice a [button] on the wall here. In one direction,\nthe tunnel leads to the [mouth] of the cave. In the other, the [tunnel]\ncontinues."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"button"===r?(t.print("You press the button and wait."),t.sleep(1),t.print("."),t.sleep(1),t.print(".\n"),t.sleep(1),t.print("DING! The wall next to the button opens revealing an elevator!\n"),t.print("Entering the elevator, you begin to descend."),t.sleep(1),t.print("."),t.sleep(1),t.print(".\n"),t.sleep(1),t.print("The elevator door opens and you exit.\n"),new m):"tunnel"===r?(t.print("You continue down the tunnel.\n"),new w):"mouth"===r?(t.print("You return to the mouth of the cave.\n"),new k):(e.print("Invalid command!\n"),n)})()}}class k{getName(e){return"The Mouth of the Cave"}getDescription(e){return"You are at the mouth of the cave. It is dark and damp. Luckily, you brought your\ntrusty flashlight with you! You can see two paths here. One leads to the [left]\nand the other leads to the [right]. You can also see the [entrance] of the cave."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"right"===r?(t.print("You take the path to the right.\n"),new v):"left"===r?(t.print("You take the path to the left.\n"),new g):"entrance"===r?(t.print("On second thought, you return to the entrance.\n"),new b):(t.print("Invalid Command!\n"),n)})()}}class b{getName(e){return"Cave Entrance"}getDescription(e){return"You stand before a cave. It is well known that an evil dragon slumbers here.\nFrom time to time, the dragon wakes to terrorize the nearby villages and steal\ntheir gold. Dare you [enter] the cave in search of riches? Or would you rather\n[run] home to the comfort of your warm bed?"}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"enter"===r?(t.print("You enter the cave.\n"),new k):("run"===r?(t.print("Scared of the dragon, you run home to your bed where fall asleep.\n"),t.gameOver()):t.print("Invalid command!"),n)})()}}class I extends n{constructor(){super(...arguments),this.hasKey=!1,this.hasSword=!1,this.strength=0}getName(){return"The Dragon's Lair"}getAuthor(){return"Joseph Collard"}getDescription(){return"Description"}onStart(){var e=this;return t(function*(){return e.strength=0,e.hasKey=!1,e.hasSword=!1,yield e.printTextFile("dragonsLair/title.txt"),e.print("\n                           A text adventure by Joseph Collard\n"),e.sleep(.5),new b})()}}class Y{getName(e){return"Broken Escalator"}getDescription(e){return"You are standing on a broken escalator. There is a [goat] here blocking your \nway forward. The steps of the escalator lead [back] to the subway platform."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();return"back"===r?(t.print("\nSeeing no way forward, you return to the subway platform.\n"),new T):("goat"===r?(t.print("\n There is an angry looking goat blocking the escalator.\n"),t.print("\nThe goat looks very [hungry]. BAAAA!\n"),t.isGoatOnFire&&t.print("\nThe goat is on [fire].\n")):"fire"===r&&t.isGoatOnFire?!0===t.hasSpryte?(t.print("\nYou take the Spryte from your pocket and pour it over the goat. The flames go out.\n"),t.isGoatOnFire=!1):t.print("\nYep! That's a [fire]!\n"):"fire"!==r||t.isGoatOnFire?"hungry"===r&&!0===t.isGoatOnFire?t.print("\nThe goat is on fire. Perhaps you should find a way to put it out.\n"):"hungry"===r&&!1===t.isGoatOnFire&&t.print("\nThe goat looks very hungry. You hand it the empty Spryte can. The goat crunches through it\n in a matter of seconds. It BAAAAS happily before hopping away. You continue up the broken \n escalator and return home. Did that really happen?\n"):t.print("\nNo fire here!.\n"),"hungry"===r&&!1===t.isGoatOnFire&&t.gameWon(),n)})()}}class T{getName(e){return"Subway Platform"}getDescription(e){return"You are standing on the subway platform. There is a broken [escalator] here\nand a vending [machine]."}handleInput(e){var n=this;return t(function*(){const t=e,r=(yield t.getInput()).toLowerCase().trim();if("escalator"===r)t.print("\nIt's broken. You'll have to [walk] up it.\n");else{if("walk"===r)return t.print("\nYou start to walk up the escalator.\n"),new Y;"machine"===r?t.print("\nOh wow! It's one of those cool new Spryte machines. It has a [coin] slot.\n"):"coin"===r&&!1===t.hasSpryte?(t.print("\nYou drop 4 coins into the vending machine. You hear a loud whirring sound followed by a loud \nKA-CHUNK. You reach down and pickup a Spryte.\n"),t.hasSpryte=!0):t.print("coin"===r&&!0===t.hasSpryte?"\nYou already have a Spryte.\n":"\nInvalid command!")}return n})()}}class C extends n{constructor(){super(...arguments),this.isGoatOnFire=!0,this.hasSpryte=!1}getName(){return"Flaming Goat"}getAuthor(){return"Goat Man Jones"}getDescription(){return"Can you pass the Goat's challenge?"}onStart(){var e=this;return t(function*(){return e.isGoatOnFire=!0,e.hasSpryte=!1,yield e.printTextFile("FlamingGoat/title.txt"),e.print("\n                           A text adventure by Goat Man Jones\n"),e.sleep(.5),e.print("\nAfter a long day, you are the lone passenger on a subway training heading toward home.\n\n"),e.sleep(.5),e.print("It slows as it approaches your stop.\n\n"),e.sleep(.5),e.print("The doors open and you step out onto an empty platform.\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),yield e.getInput(),new T})()}}const D=new class{constructor(){this.SINGLE_ADVENTURE_MODE=!0}getAdventures(){const e=[];return e.push(new I),e.push(new C),e}getAdventure(){return new y}};class S{constructor(e){this.TYPE="PrintMessage",this.message=e}}class P{constructor(){this.TYPE="PickAdventureMessage"}}const A=new class{constructor(){this.fileCache=new Map,this.inputQueue=[],this.printQueue=[]}threadSleep(e){var n=this;return t(function*(){if(0==n.printQueue.length)return new Promise(t=>setTimeout(t,1e3*e));const t=n.printQueue[n.printQueue.length-1].renderAfter-(new Date).getTime()+1e3*e;return new Promise(e=>setTimeout(e,t))})()}sleep(e){const t=this.getStartTime()+1e3*e;this.printQueue.push({message:"",renderAfter:t})}getInput(){var e=this;return t(function*(){for(;0==e.inputQueue.length;)yield e.threadSleep(.1);const t=e.inputQueue.shift();return Promise.resolve(t)})()}getStartTime(){return 0==this.printQueue.length?(new Date).getTime():this.printQueue[this.printQueue.length-1].renderAfter}print(e,t=.01){const n=1e3*t;let r=this.getStartTime();for(let o=0;o<e.length;o++)r+=n,this.printQueue.push({message:e[o],renderAfter:r})}printLines(e,t){const n=1e3*t;let r=this.getStartTime();e.forEach(e=>{r+=n,this.printQueue.push({message:e+"\n",renderAfter:r})})}printFile(e,n=.1){var r=this;return t(function*(){return new Promise(t=>{if(r.fileCache.has(e)){const o=r.fileCache.get(e);return r.printLines(o,n),void t()}const o=new XMLHttpRequest,a="assets/"+e;o.addEventListener("load",i=>{let s=[];o.status>=200&&o.status<300?s=o.responseText.split("\n"):(s=[`Could not load file: "${e}". Error Code: ${o.status} - ${o.statusText}`],console.error(`Could not load: ${a}`)),r.fileCache.set(e,s),r.printLines(s,n),t()}),o.open("GET",a),o.send()})})()}startPrintThread(){var e=this;return t(function*(){for(;;){for(;0==e.printQueue.length;)yield e.threadSleep(.1);const t=(new Date).getTime();for(;e.printQueue.length>0&&e.printQueue[0].renderAfter<=t;){const t=e.printQueue.shift();postMessage(new S(t.message))}}})()}pushInput(e){this.inputQueue.push(e.message)}};addEventListener("message",({data:e})=>{if("RunAdventureMessage"===e.TYPE){let t=D.SINGLE_ADVENTURE_MODE?D.getAdventure():D.getAdventures()[e.index];t.setEngine(A),console.log("Starting PrintThread."),A.startPrintThread(),console.log("Starting adventure."),t.run(),D.SINGLE_ADVENTURE_MODE||(t.onFinish=()=>postMessage(new P))}else"InputMessage"==e.TYPE?A.pushInput(e):(console.error("An illegal message was received by the engine: "),console.error(e))})}();