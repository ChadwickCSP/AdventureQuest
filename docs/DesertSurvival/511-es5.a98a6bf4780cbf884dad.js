!function(){function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=a(e);if(t){var u=a(this).constructor;n=Reflect.construct(o,arguments,u)}else n=o.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}!function(){"use strict";function t(e,t,n,r,a,o,u){try{var i=e[o](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var n=this,r=arguments;return new Promise(function(a,o){var u=e.apply(n,r);function i(e){t(u,a,o,i,s,"next",e)}function s(e){t(u,a,o,i,s,"throw",e)}i(void 0)})}}var a=function(){function e(){o(this,e),this._gameWon=!1,this._gameLost=!1}return i(e,[{key:"print",value:function(e,t){this.engine.print(e,t)}},{key:"printTextFile",value:function(e,t){var n=this;return r(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Printing: "+e),r.next=3,n.engine.printFile(e,t);case 3:case"end":return r.stop()}},r)}))()}},{key:"sleep",value:function(e){this.engine.sleep(e)}},{key:"getInput",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.getInput();case 2:return n=t.sent,t.abrupt("return",(e.print("\n> ".concat(n,"\n")),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"DisplayRoomName",value:function(){for(var e=this.room.getName(this),t=" |",n="=-",r=0;r<e.length;r++)n+=r%2==0?"=":"-";e.length%2==1?n+="-=":(n+="=-=",t="  |");var a="| "+e+t;this.print("\n"+n+"\n"),this.print(a+"\n"),this.print(n+"\n\n")}},{key:"setEngine",value:function(e){this.engine=e}},{key:"gameOver",value:function(){this._gameLost=!0}},{key:"gameWon",value:function(){this._gameWon=!0}},{key:"onFinish",value:function(){this.run()}},{key:"run",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._gameWon=!1,e._gameLost=!1,t.next=4,e.onStart();case 4:e.room=t.sent;case 5:if(e._gameWon||e._gameLost){t.next=15;break}return e.DisplayRoomName(),t.next=9,e.sleep(.5);case 9:return e.print(e.room.getDescription(e)+"\n"),t.next=12,e.room.handleInput(e);case 12:e.room=t.sent;case 13:t.next=5;break;case 15:if(!e._gameWon){t.next=22;break}return e.print("\nCongratulations, you won!\n\n"),e.print("\nPress Enter to Continue...\n"),t.next=20,e.getInput();case 20:t.next=28;break;case 22:if(t.t0=e._gameLost,!t.t0){t.next=28;break}return e.print("\nGame Over!\n\n"),e.print("\nPress Enter to Continue...\n"),t.next=28,e.getInput();case 28:e.onFinish();case 29:case"end":return t.stop()}},t)}))()}}]),e}(),u=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Coyote"}},{key:"getDescription",value:function(e){return"You enter camp when all of a sudded the [coyote] that stole your [keys]\n runs up to you. It still has your keys in it's mouth, but it\n looks like it's hungry for your [steak]."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return",("coyote"===a&&!1===r.doesPlayerHaveKeys?r.print("\nYou try to scare the coyote into dropping your keys,\nbut it only makes the coyote angry. It may be better idea to find another way\nto get your keys back."):"steak"===a&&!1===r.doesPlayerHaveKeys?(r.print("\nYou throw your steak at the coyote and it immediately\n drops your keys to go after the steak.\nNow it's time to drive out of here! Try starting your car now that\nyou've got your keys back."),r.doesPlayerHaveKeys=!0):"coyote"===a&&!0===r.doesPlayerHaveKeys?r.print("\nYou've already got your keys. Leave the coyote alone and get\nout of here!"):"keys"===a&&!1===r.doesPlayerHaveKeys?r.print("\nYou try to take your keys from the coyote but it starts\n growling at you. Try finding another way to get your keys."):"steak"===a&&!0===r.doesPlayerHaveKeys?r.print("\nYou've already got your keys. Time to get out of here!"):"keys"===a&&!0===r.doesPlayerHaveKeys?(r.print("\nYou jump into your car and use your keys to star the engine.\n Now that you have a way to leave you waste no time driving\n out of here and heading home!. "),r.gameWon()):r.print("\nInvalid Command.\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),s=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Chest"}},{key:"getDescription",value:function(e){return"While walking back to camp you trip on something hard\n buried in the sand. You shovel off the sand and find a hidden [chest]\n Maybe you should figure out how to [bust] it open!"}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("chest"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nYou try opening the chest but naturally, it's locked.\n Try using force to get it open"),n.next=11;break;case 8:if("bust"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou take the boulder you are carrying and use all\n your strength to throw it at the chest."),r.print("\nThe chest opens up and you see the inside is filled with cooked steak!\nFinally some real food!\nNow that you've gotten ahold of some food, you head back to camp."),new u));case 10:r.print("\nInvalid Command.\n");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),c=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Boulder"}},{key:"getDescription",value:function(e){return"While walking back towards camp with your [smoothie] in your hand,\n you come across a large [boulder].\n "}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("smoothie"!==(a=n.sent.toLowerCase().trim())||!1!==r.hasPlayerDrunkTheSmoothie){n.next=8;break}r.print("\nYou drink your smoothie and now feel strong enough\n to lift the boulder in your path."),r.hasPlayerDrunkTheSmoothie=!0,n.next=19;break;case 8:if("smoothie"!==a||!0!==r.hasPlayerDrunkTheSmoothie){n.next=12;break}r.print("\nYou already drank your smoothie.\n Maybe you should try your luck lifting\n the boulder!"),n.next=19;break;case 12:if("boulder"!==a||!1!==r.hasPlayerDrunkTheSmoothie){n.next=16;break}r.print("\nYou try lifting the boulder, but you are not\n strong enough. Maybe try drinking your smoothie first!"),n.next=19;break;case 16:if("boulder"!==a||!0!==r.hasPlayerDrunkTheSmoothie){n.next=18;break}return n.abrupt("return",(r.print("\nAfter drinking your smoothie you are able to easily lift\n the boulder"),r.print("\nYou decide to bring the boulder along with you as you head\n back towards camp, after all it may come in handy later on!"),new s));case 18:r.print("\nInvalid Command.\n");case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}},n)}))()}}]),e}(),h=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Blender"}},{key:"getDescription",value:function(e){return"You head down path two while carrying your [coconuts] and come to a room\n with a [blender] and some [protein powder] ."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("coconuts"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nYou decide to make a smoothie and put the coconuts in the blender.\n"),r.isCoconutInBlender=!0,n.next=23;break;case 8:if("protein powder"!==a||!1!==r.isCoconutInBlender){n.next=12;break}r.print("\nTry putting the coconuts in the blender first!\n"),n.next=23;break;case 12:if("protein powder"!==a||!0!==r.isCoconutInBlender){n.next=16;break}r.print("\nYou decide to throw some scoops of protein powder\ninto the blender to add a little extra flavor!\n"),r.isProteinPowderInBlender=!0,n.next=23;break;case 16:if("blender"===a&&(!1===r.isProteinPowderInBlender||!1===r.isCoconutInBlender)){n.next=22;break}if("blender"!==a||!r.isProteinPowderInBlender||!0!==r.isCoconutInBlender){n.next=19;break}return n.abrupt("return",(r.print("\nYou blend the coconuts and protein powder and make\na delicious smoothie!"),r.print("\nNow that you've made a smoothie you leave the cave\nand head back out into the desert.\n"),new c));case 19:r.print("\nInvalid Command.\n"),n.next=23;break;case 22:r.print("\nYou do not have all your ingredients in the blender yet!");case 23:return n.abrupt("return",t);case 24:case"end":return n.stop()}},n)}))()}}]),e}(),p=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"DeadEnd"}},{key:"getDescription",value:function(e){return"You go down path one but it ends up being a dead end.\nGo back to the cave [entrance]."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(n.t0=n.sent.toLowerCase().trim(),"entrance"!==n.t0){n.next=8;break}n.t1=(r.print("\nYou head back to the entrance of the cave"),new l),n.next=9;break;case 8:n.t1=(r.print("\nInvalid Command.\n"),t);case 9:return n.abrupt("return",n.t1);case 10:case"end":return n.stop()}},n)}))()}}]),e}(),l=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Cave"}},{key:"getDescription",value:function(e){return"After eating, you grab some coconuts for the road and head over to a nearby cave.\nYou approach the entrance and see that the cave splits into two\n You must choose to go down either path [One] or path [Two]."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","one"===a?(r.print("\nYou start to head down path one.\n"),new p):"two"===a?(r.print("You start to head down path two.\n"),new h):(r.print("\nInvalid Command.\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),f=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"PalmTree"}},{key:"getDescription",value:function(e){return"You head over to a palm tree and see it is full of coconuts.\nYou are feeling pretty hungry, so you decide to try getting some of them down.\nThere are some [rocks] that may be able to help you,\nor you could try giving the tree a [shake]"}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("rocks"!==(a=n.sent.toLowerCase().trim())||!1!==r.hasCoconut){n.next=8;break}r.print("\nYou throw a rock up at the tree but you miss the tree by a mile!"),n.next=11;break;case 8:if("rocks"!==a||!0!==r.hasCoconut){n.next=10;break}return n.abrupt("return",(r.print("You use a rock to break open a coconut and get the fruit!"),new l));case 10:"shake"===a?(r.print("\nYou shake the tree and plenty of coconuts fall down!\nNice work! But now you've just got solid coconuts.\nTry getting them to [break]."),r.hasCoconut=!0):r.print("break"===a?"\nYou slam the coconuts on the ground but they don't crack, maybe try using some of the [rocks]!":"\nInvalid Command.\n");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),d=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Oasis"}},{key:"getDescription",value:function(e){return"You head off in search of water and see a nearby oasis.\nYou see a [bucket] laying next to the [water], which is clean in some areas,\nbut murky and [dirty] in others."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("water"!==(a=n.sent.toLowerCase().trim())||!1!==r.hasBucket){n.next=8;break}r.print("\nYou try drinking some water but most of it slips through your hands.\nMaybe you should try using a [bucket]!\n"),n.next=19;break;case 8:if("bucket"!==a||!1!==r.hasBucket){n.next=12;break}r.print("\nGreat! Now you have a bucket!\nBut there's no [water] in your bucket.\nTry filling it up first!\n"),r.hasBucket=!0,n.next=19;break;case 12:if("bucket"!==a||!0!==r.hasBucket){n.next=16;break}r.print("\nYou already have a bucket!"),n.next=19;break;case 16:if("water"!==a||!0!==r.hasBucket){n.next=18;break}return n.abrupt("return",(r.print("\nYou put the water into the bucket "),r.print("\nAfter drinking the water you decide to explore, and head over to a nearby palm tree.\n"),new f));case 18:r.print("dirty"===a?"\nYou sip a bit of the dirty water but spit it out immediately.\nMaybe try drinking some that's clean!\n":"\nInvalid Command.\n");case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}},n)}))()}}]),e}(),y=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Desert"}},{key:"getDescription",value:function(e){return"You exit your car and see that you are completely stranded in the middle of nowhere.\nAll of a sudden a coyote comes out of nowhere and grabs your keys before\n running off into the desert.\n You decide to set up camp while you are stuck here\nYou take the [tent] and [poles] you have\nin your truck and try to set it up."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("tent"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nOops! Try using the poles first.\n"),n.next=11;break;case 8:if("poles"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou put the poles in the tent and successfully set up your shelter!\n"),r.print("\nAfter all that work you have gotten really thirsty.\nIt's time to go find some water!\n"),new d));case 10:r.print("\nInvalid Command.\n");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),g=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"StoppingTheCar"}},{key:"getDescription",value:function(e){return"You see a spot to park up ahead but there is a cactus right behind the spot.\nIf you [accelerate] you will miss the spot. Try to [brake] quickly!."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("accelerate"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nYou crash into the cactus and your car explodes.\n"),r.gameOver(),n.next=11;break;case 8:if("brake"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou stop right before the cactus and stop your car in a safe spot.\n"),new y));case 10:r.print("\nInvalid Command.\n");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),m=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Car"}},{key:"getDescription",value:function(e){return"You are driving through the desert in your car when the engine begins to overheat.\nThe car goes off the road and you see several oncoming obstacles in your path.\nYou see a fork in the road. The path on the [left] is blocked by a boulder.\nThe path on the [right] is clear."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("left"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nYou crash into the boulder and your car explodes"),r.gameOver(),n.next=11;break;case 8:if("right"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou head onto the clear path and continue driving down the path.\n"),new g));case 10:r.print("\nInvalid Command.\n");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),k=function(t){e(u,t);var a=n(u);function u(){var e;return o(this,u),(e=a.apply(this,arguments)).hasCoconut=!1,e.hasBucket=!1,e.isCoconutInBlender=!1,e.isProteinPowderInBlender=!1,e.hasPlayerDrunkTheSmoothie=!1,e.doesPlayerHaveKeys=!1,e.hasSpryte=!1,e}return i(u,[{key:"getName",value:function(){return"Desert Survival"}},{key:"getAuthor",value:function(){return"Coconut Collector"}},{key:"getDescription",value:function(){return"Can you survive the desert?"}},{key:"onStart",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.hasCoconut=!1,e.hasSpryte=!1,e.hasBucket=!1,e.isCoconutInBlender=!1,e.isCoconutInBlender=!1,e.hasPlayerDrunkTheSmoothie=!1,e.doesPlayerHaveKeys=!1,t.next=9,e.printTextFile("DesertSurvival/title.txt");case 9:return e.print("\n                           A text adventure by Coconut Collector\n"),e.sleep(.5),e.print("\nYou are planning to go on a trip to the desert. You pack your things and get in your car\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),t.next=16,e.getInput();case 16:return t.abrupt("return",new m);case 17:case"end":return t.stop()}},t)}))()}}]),u}(a),v=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"A Dead End"}},{key:"getDescription",value:function(e){return"You are at a dead end. There is a large [boulder] here. A path leads [back] to\nthe mouth of the cave."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("boulder"===(a=n.sent.toLowerCase().trim())&&r.strength<10)){n.next=8;break}r.print("You try to lift the boulder but you're too weak!\n"),n.next=15;break;case 8:if(!("boulder"===a&&r.strength>=10)){n.next=12;break}r.print("You lift the boulder with ease!\n"),r.hasKey?r.print("Now you're just showing off.\n"):(r.print("Beneath the boulder, you find a key.\n"),r.print("You take the key and place it in your pocket!\n"),r.hasKey=!0),n.next=15;break;case 12:if("back"!==a){n.next=14;break}return n.abrupt("return",(r.print("You return to the Mouth of the Cave\n"),new Y));case 14:r.print("Invalid command!\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),w=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Ye Olde Gym"}},{key:"getDescription",value:function(e){return"You are in a gym filled with exercise equipment. A sign on the wall reads, 'Ye\nOlde Gym'. It appears all of the equipment is in use except for some [weights].\nOn the far wall is an [elevator]."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if(!("weights"===(a=n.sent.toLowerCase().trim())&&r.strength<10)){n.next=8;break}r.print("You pick up the weights and do a rep!\n"),r.strength=r.strength+6,r.sleep(1),r.print("Your strength is now ".concat(r.strength,"\n")),n.next=15;break;case 8:if(!("weights"===a&&r.strength>=10)){n.next=12;break}r.print("You're feeling pretty strong already, maybe you could go lift some boulders!\n"),n.next=15;break;case 12:if("elevator"!==a){n.next=14;break}return n.abrupt("return",(r.print("You enter the elevator and begin to ascend."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("The door opens and you step out into the cave.\n"),new I));case 14:r.print("Invalid command!\n");case 15:return n.abrupt("return",t);case 16:case"end":return n.stop()}},n)}))()}}]),e}(),b=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"The Dragon's Lair"}},{key:"getDescription",value:function(e){return"You are standing inside of a dragon's lair! The air is hot and dank. A tunnel\nleads [back] the way you came. In the center of the room is a massive pile of\ngold atop which a massive red dragon slumbers. Probably best not to [wake] the\ndragon. If you could [slay] it, you would be a hero!"}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","back"===a?(r.print("You head back the way you came.\n"),new x):("wake"===a?(r.print("You wake the dragon...\n"),r.sleep(1),r.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),r.gameOver()):"slay"===a&&r.hasSword?(r.print("You draw your sword to slay the dragon.\n"),r.sleep(1),r.print("With your sword in hand, you sneak up to the dragon and drive it into the\nbeast's heart. The evil dragon winces as it realizes its reign of terror is\nover. Congratulations, you are a hero!"),r.gameWon()):"slay"!==a||r.hasSword?r.print("Invalid command!\n"):(r.print("You attempt to pummel the dragon with your fists!\n"),r.sleep(1),r.print("The dragon wakes and snarls, 'Who disturbs my slumber!?' It glares at you with\ndisdain and smiles crookedly before devouring you. The dragon lets out a\nsatisfying belch before closing its eyes and drifting back to sleep."),r.gameOver()),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),x=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"A Large Natural Cave"}},{key:"getDescription",value:function(e){return"You are in a large natural room within a cave. It is unnaturally warm here and\nyou can hear what sounds like a giant creature [snoring] around a corner. In the\ncenter of the room is a [chest]. A [tunnel] leads back toward the mouth of the\ncave."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("snoring"!==(a=n.sent.toLowerCase().trim())){n.next=6;break}return n.abrupt("return",(r.print("You slowly approach the snoring...\n"),new b));case 6:if("chest"!==a||!r.hasKey){n.next=10;break}!1===r.hasSword?(r.print("The chest is locked.\n"),r.sleep(1),r.print("You take the key from your pocket and unlock the chest.\n"),r.sleep(1),r.print("Inside, you find a beautiful sword!\n"),r.hasSword=!0):r.print("You search the chest again, but it is empty.\n"),n.next=17;break;case 10:if("chest"===a&&!r.hasKey){n.next=16;break}if("tunnel"!==a){n.next=13;break}return n.abrupt("return",(r.print("You head back toward the mouth of the cave.\n"),new I));case 13:r.print("Invalid command!\n"),n.next=17;break;case 16:r.print("The chest is locked!\n");case 17:return n.abrupt("return",t);case 18:case"end":return n.stop()}},n)}))()}}]),e}(),I=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"A Long Winding Tunnel"}},{key:"getDescription",value:function(e){return"You are in a long winding tunnel. It is pitch black except for the beam emitting\nfrom your flashlight. You notice a [button] on the wall here. In one direction,\nthe tunnel leads to the [mouth] of the cave. In the other, the [tunnel]\ncontinues."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","button"===a?(r.print("You press the button and wait."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("DING! The wall next to the button opens revealing an elevator!\n"),r.print("Entering the elevator, you begin to descend."),r.sleep(1),r.print("."),r.sleep(1),r.print(".\n"),r.sleep(1),r.print("The elevator door opens and you exit.\n"),new w):"tunnel"===a?(r.print("You continue down the tunnel.\n"),new x):"mouth"===a?(r.print("You return to the mouth of the cave.\n"),new Y):(e.print("Invalid command!\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),Y=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"The Mouth of the Cave"}},{key:"getDescription",value:function(e){return"You are at the mouth of the cave. It is dark and damp. Luckily, you brought your\ntrusty flashlight with you! You can see two paths here. One leads to the [left]\nand the other leads to the [right]. You can also see the [entrance] of the cave."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","right"===a?(r.print("You take the path to the right.\n"),new I):"left"===a?(r.print("You take the path to the left.\n"),new v):"entrance"===a?(r.print("On second thought, you return to the entrance.\n"),new T):(r.print("Invalid Command!\n"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),T=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Cave Entrance"}},{key:"getDescription",value:function(e){return"You stand before a cave. It is well known that an evil dragon slumbers here.\nFrom time to time, the dragon wakes to terrorize the nearby villages and steal\ntheir gold. Dare you [enter] the cave in search of riches? Or would you rather\n[run] home to the comfort of your warm bed?"}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","enter"===a?(r.print("You enter the cave.\n"),new Y):("run"===a?(r.print("Scared of the dragon, you run home to your bed where fall asleep.\n"),r.gameOver()):r.print("Invalid command!"),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),C=function(t){e(u,t);var a=n(u);function u(){var e;return o(this,u),(e=a.apply(this,arguments)).hasKey=!1,e.hasSword=!1,e.strength=0,e}return i(u,[{key:"getName",value:function(){return"The Dragon's Lair"}},{key:"getAuthor",value:function(){return"Joseph Collard"}},{key:"getDescription",value:function(){return"Description"}},{key:"onStart",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.strength=0,e.hasKey=!1,e.hasSword=!1,t.next=5,e.printTextFile("dragonsLair/title.txt");case 5:return e.print("\n                           A text adventure by Joseph Collard\n"),e.sleep(.5),t.abrupt("return",new T);case 8:case"end":return t.stop()}},t)}))()}}]),u}(a),R=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Broken Escalator"}},{key:"getDescription",value:function(e){return"You are standing on a broken escalator. There is a [goat] here blocking your \nway forward. The steps of the escalator lead [back] to the subway platform."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:return a=n.sent.toLowerCase().trim(),n.abrupt("return","back"===a?(r.print("\nSeeing no way forward, you return to the subway platform.\n"),new D):("goat"===a?(r.print("\n There is an angry looking goat blocking the escalator.\n"),r.print("\nThe goat looks very [hungry]. BAAAA!\n"),r.isGoatOnFire&&r.print("\nThe goat is on [fire].\n")):"fire"===a&&r.isGoatOnFire?!0===r.hasSpryte?(r.print("\nYou take the Spryte from your pocket and pour it over the goat. The flames go out.\n"),r.isGoatOnFire=!1):r.print("\nYep! That's a [fire]!\n"):"fire"!==a||r.isGoatOnFire?"hungry"===a&&!0===r.isGoatOnFire?r.print("\nThe goat is on fire. Perhaps you should find a way to put it out.\n"):"hungry"===a&&!1===r.isGoatOnFire&&r.print("\nThe goat looks very hungry. You hand it the empty Spryte can. The goat crunches through it\n in a matter of seconds. It BAAAAS happily before hopping away. You continue up the broken \n escalator and return home. Did that really happen?\n"):r.print("\nNo fire here!.\n"),"hungry"===a&&!1===r.isGoatOnFire&&r.gameWon(),t));case 5:case"end":return n.stop()}},n)}))()}}]),e}(),D=function(){function e(){o(this,e)}return i(e,[{key:"getName",value:function(e){return"Subway Platform"}},{key:"getDescription",value:function(e){return"You are standing on the subway platform. There is a broken [escalator] here\nand a vending [machine]."}},{key:"handleInput",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,r.getInput();case 3:if("escalator"!==(a=n.sent.toLowerCase().trim())){n.next=8;break}r.print("\nIt's broken. You'll have to [walk] up it.\n"),n.next=11;break;case 8:if("walk"!==a){n.next=10;break}return n.abrupt("return",(r.print("\nYou start to walk up the escalator.\n"),new R));case 10:"machine"===a?r.print("\nOh wow! It's one of those cool new Spryte machines. It has a [coin] slot.\n"):"coin"===a&&!1===r.hasSpryte?(r.print("\nYou drop 4 coins into the vending machine. You hear a loud whirring sound followed by a loud \nKA-CHUNK. You reach down and pickup a Spryte.\n"),r.hasSpryte=!0):r.print("coin"===a&&!0===r.hasSpryte?"\nYou already have a Spryte.\n":"\nInvalid command!");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}},n)}))()}}]),e}(),P=function(t){e(u,t);var a=n(u);function u(){var e;return o(this,u),(e=a.apply(this,arguments)).isGoatOnFire=!0,e.hasSpryte=!1,e}return i(u,[{key:"getName",value:function(){return"Flaming Goat"}},{key:"getAuthor",value:function(){return"Goat Man Jones"}},{key:"getDescription",value:function(){return"Can you pass the Goat's challenge?"}},{key:"onStart",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isGoatOnFire=!0,e.hasSpryte=!1,t.next=4,e.printTextFile("FlamingGoat/title.txt");case 4:return e.print("\n                           A text adventure by Goat Man Jones\n"),e.sleep(.5),e.print("\nAfter a long day, you are the lone passenger on a subway training heading toward home.\n\n"),e.sleep(.5),e.print("It slows as it approaches your stop.\n\n"),e.sleep(.5),e.print("The doors open and you step out onto an empty platform.\n\n"),e.sleep(.5),e.print("Press Enter to Continue..."),t.next=15,e.getInput();case 15:return t.abrupt("return",new D);case 16:case"end":return t.stop()}},t)}))()}}]),u}(a),S=new(function(){function e(){o(this,e),this.SINGLE_ADVENTURE_MODE=!0}return i(e,[{key:"getAdventures",value:function(){var e=[];return e.push(new C),e.push(new P),e}},{key:"getAdventure",value:function(){return new k}}]),e}()),A=function e(t){o(this,e),this.TYPE="PrintMessage",this.message=t},N=function e(){o(this,e),this.TYPE="PickAdventureMessage"},L=new(function(){function e(){o(this,e),this.fileCache=new Map,this.inputQueue=[],this.printQueue=[]}return i(e,[{key:"threadSleep",value:function(e){var t=this;return r(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=t.printQueue.length){n.next=2;break}return n.abrupt("return",new Promise(function(t){return setTimeout(t,1e3*e)}));case 2:return r=t.printQueue[t.printQueue.length-1].renderAfter-(new Date).getTime()+1e3*e,n.abrupt("return",new Promise(function(e){return setTimeout(e,r)}));case 4:case"end":return n.stop()}},n)}))()}},{key:"sleep",value:function(e){var t=this.getStartTime()+1e3*e;this.printQueue.push({message:"",renderAfter:t})}},{key:"getInput",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.inputQueue.length){t.next=5;break}return t.next=3,e.threadSleep(.1);case 3:t.next=0;break;case 5:return n=e.inputQueue.shift(),t.abrupt("return",Promise.resolve(n));case 7:case"end":return t.stop()}},t)}))()}},{key:"getStartTime",value:function(){return 0==this.printQueue.length?(new Date).getTime():this.printQueue[this.printQueue.length-1].renderAfter}},{key:"print",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=1e3*t,r=this.getStartTime(),a=0;a<e.length;a++)r+=n,this.printQueue.push({message:e[a],renderAfter:r})}},{key:"printLines",value:function(e,t){var n=this,r=1e3*t,a=this.getStartTime();e.forEach(function(e){a+=r,n.printQueue.push({message:e+"\n",renderAfter:a})})}},{key:"printFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=this;return r(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r){if(n.fileCache.has(e)){var a=n.fileCache.get(e);return n.printLines(a,t),void r()}var o=new XMLHttpRequest,u="assets/"+e;o.addEventListener("load",function(a){var i=[];o.status>=200&&o.status<300?i=o.responseText.split("\n"):(i=['Could not load file: "'.concat(e,'". Error Code: ').concat(o.status," - ").concat(o.statusText)],console.error("Could not load: ".concat(u))),n.fileCache.set(e,i),n.printLines(i,t),r()}),o.open("GET",u),o.send()}));case 1:case"end":return r.stop()}},r)}))()}},{key:"startPrintThread",value:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.printQueue.length){t.next=5;break}return t.next=3,e.threadSleep(.1);case 3:t.next=0;break;case 5:for(n=(new Date).getTime();e.printQueue.length>0&&e.printQueue[0].renderAfter<=n;)r=e.printQueue.shift(),postMessage(new A(r.message));case 7:t.next=0;break;case 9:case"end":return t.stop()}},t)}))()}},{key:"pushInput",value:function(e){this.inputQueue.push(e.message)}}]),e}());addEventListener("message",function(e){var t=e.data;if("RunAdventureMessage"===t.TYPE){var n=S.SINGLE_ADVENTURE_MODE?S.getAdventure():S.getAdventures()[t.index];n.setEngine(L),console.log("Starting PrintThread."),L.startPrintThread(),console.log("Starting adventure."),n.run(),S.SINGLE_ADVENTURE_MODE||(n.onFinish=function(){return postMessage(new N)})}else"InputMessage"==t.TYPE?L.pushInput(t):(console.error("An illegal message was received by the engine: "),console.error(t))})}()}();